
@using uiExp.Shared
@inherits LayoutComponentBase
@inject NavigationManager NavigationManager
@inject IJSRuntime js


@code {
    private void NavigateBack()
    {
        var destination = (InPm()) ? "/inbox" : "/";
        NavigationManager.NavigateTo(destination);
    }
    private void NavigateRequestComponent() { NavigationManager.NavigateTo("/request"); }
    private void NavigateInboxComponent() { NavigationManager.NavigateTo("/inbox"); }
    private void NavigateMyLinesComponent() { NavigationManager.NavigateTo("/mylines"); }

    private bool AtHome()
    {
        return NavigationManager.Uri.EndsWith("/");
    }
    private bool InConvo()
    {
        return NavigationManager.Uri.Contains("/convo");
    }
    private bool InInbox()
    {
        return NavigationManager.Uri.EndsWith("/inbox");
    }
    private bool InRequest()
    {
        return NavigationManager.Uri.EndsWith("/request");
    }
    private bool AtMylines()
    {
        return NavigationManager.Uri.EndsWith("/mylines");
    }
    private bool InPm()
    {
        return NavigationManager.Uri.Contains("Pm");
    }
    private bool ShowBottom()
    {
        return !InConvo() && !InInbox() && !InRequest() & !InPm();
    }
    private String GetText()
    {
        if (AtHome())
            return "Conversation request...";
        else
            return "Comment...";
    }
    private void GoToProfile()
    {
        NavigationManager.NavigateTo("/user");
    }

    public static int ConvoNum = 0;


    [JSInvokable]
    public static void updateHeader()
    {
        ConvoNum = ConvoNum + 1;
    }

    public void printHeader()
    {
        foreach (var convo in LoadFeedConvos.ConvoList)
            Console.WriteLine(convo.GetTitle());
    }
    public void PrintUri()
    {
        Console.WriteLine(NavigationManager.Uri);
    }
    public bool ShowTopFloat()
    {
        if (AtHome())
        {
            return true;
        }
        return false;
    }
}


@*example app 
    <div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <div class="main">
        <div class="top-row px-4">
            <a href="http://blazor.net" target="_blank" class="ml-md-auto">About</a>
        </div>

        <div class="content px-4">
            @Body
        </div>
    </div>
</div>*@

<div class="main">

    @if (!ShowBottom())
    {
        <div class="top-row px-4" id="normal" style="position:fixed; top:0">
            <span class="material-icons" @onclick="NavigateBack">
                arrow_back_ios
            </span>
        </div>
    }
    else if (AtMylines())
    {
        <div class="top-row px-4" id="mylines" style="position:fixed; top:0">
            <span class="material-icons">
                settings
            </span>
        </div>
    }


    @Body

    @*in order to get this to stay fixed, need to specifiy position in line.*@
    @if (ShowBottom())
    {
        <div class="bottom-row px-4" style="position:fixed; bottom:0">
            <div class="nav-icon-container">
                <i class="fas fa-home fa-2x icon" @onclick="NavigateBack"></i>
                <img src="https://pbs.twimg.com/profile_images/955259459449884672/cxYFJUJX_400x400.jpg" class="profile-link" @onclick="NavigateMyLinesComponent">
                <i class="fas fa-inbox fa-2x icon" @onclick="NavigateInboxComponent"></i>
            </div>
        </div>
    }
    else if (NavigationManager.Uri.Contains("request"))
    {
        <div class="bottom-row px-4" style="position:fixed; bottom:0">
            <input class="feedConvo" placeholder="What's on your mind?..." style="font-size:small">
            <button class="btn btn-send" style="margin-left: 2px;padding-left: 6px;padding-right: 6px;padding-bottom:0px; padding-top: 0px">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>
    }
    else if (NavigationManager.Uri.Contains("convo"))
    {
        <div class="bottom-row px-4" style="position:fixed; bottom:0">
            <input class="feedConvo" placeholder="Comment..." style="font-size:small">
            <button class="btn btn-send" style="margin-left: 2px;padding-left: 6px;padding-right: 6px;padding-bottom:0px; padding-top: 0px">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>
    }
    else if (NavigationManager.Uri.Contains("Pm"))
    {
        <div class="bottom-row px-4" style="position:fixed; bottom:0">
            <input class="feedConvo" placeholder="What's on your mind?..." style="font-size:small">
            <button class="btn btn-send" style="margin-left: 2px;padding-left: 6px;padding-right: 6px;padding-bottom:0px; padding-top: 0px">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>
    }
</div>
@*style="align-items:flex-end"*@
